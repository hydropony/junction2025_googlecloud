version: "3.9"

services:
  junction-stack:
    build:
      context: .
    container_name: junction-stack
    ports:
      - "8080:8080" # order fulfilment API
      - "8000:8000" # substitution API
      - "8100:8100" # stock prediction API
      - "6060:6060" # NLU API
      - "6000:5432" # Postgres
    environment:
      SPRING_DATASOURCE_URL: jdbc:postgresql://localhost:5432/warehouse
      SPRING_DATASOURCE_USERNAME: warehouse_user
      SPRING_DATASOURCE_PASSWORD: warehouse_pass
      PREDICT_ORDER_URL: http://localhost:8100/predict/order
      SUBSTITUTION_SERVICE_URL: http://localhost:8000/substitution/suggest
      SHORTAGE_SERVICE_URL: http://host.docker.internal:8083/shortage/proactive-call
      WAREHOUSE_DB_HOST: localhost
      WAREHOUSE_DB_PORT: 5432
      WAREHOUSE_DB_NAME: warehouse
      WAREHOUSE_DB_USER: warehouse_user
      WAREHOUSE_DB_PASSWORD: warehouse_pass
      NLU_HOST: 0.0.0.0
      NLU_PORT: 6060
